# Database

***

## Table of Contents

- [인덱스란 무엇인가?](####인덱스index란-무엇인가)

***

### [Index]

#### 인덱스(Index)란 무엇인가?

##### 1. 인덱스의 정의

- 데이터베이스에서 필요한 데이터를 빠르게 검색하기 위해 사용되는 데이터 구조. 인덱스를 활용하면 데이터베이스 안의 모든 행(Row)를 검색할 필요 없이 필요한 데이터를 빠르게 찾는 것이 가능

##### 2. 인덱스의 대표적 예시: 책 끝부분에 있는 색인

- 인덱스 사용의 대표적 예시: **책 끝부분에 있는 색인**
- 책에서 찾고 싶은 단어가 몇 페이지에 있는지 알고 싶다면? 책 뒤에 있는 색인 통해서 단어의 위치를 빠르게 찾을 수 있다.
- 찾고 싶은 단어가 여러 페이지에 있다면? 색인을 통해 단어들이 위치한 페이지 영역을 미리 알 수 있음.
- 예시) 아래 첨부 이미지에서 백사실 계곡이라는 단어는 172, 395, 416 페이지에 있음, 또한 173-416 페이지 영역에 모든 단어가 있음.
- 책에 색인이 없다면? 필요한 단어를 찾기 위해 책 전체를 처음부터 끝가지 검색해야함.
- 책의 색인과 마찬가지로, **데이터베이스에서 인덱스는 데이터의 위치를 미리 정리해두어 필요한 조건으로 검색을 빠르게 수행하도록 지원.**

![책색인](../Imgs/책색인.png)

##### 3. 데이터베이스에서 인덱스 생성 방식

- 데이터베이스 테이블(SCOUNTER)의 특정 열(AIRPORT)에 대해서 인덱스를 설정할 경우. 서버는 해당 열(AIRPORT)에 들어있는 데이터들의 값과 그 위치를 정렬하여 저장(인덱스 생성). 해당 열을 조건으로 데이터 검색을 수행하면 해당 조건의 단어를 충족하는 데이터 위치를 해당 테이블을 모두 검색(Full-Scan)하지 않아도 찾은 수 있음.
- 예시) 아래 테이블(SCOUNTER) 내 AIRPORT열을 기준으로 인덱스를 생성하고 그 중 LCY라는 값을 찾는 Case
  - 서버는 인덱스를 보고 L로 시작하는 단어가 있는 영역을 검색 영역으로 설정
  - 다음에는 C, 다음에는 Y 순으로 검색 영역을 축소, 최종적으로 LCY가 포함된 단어가 위치한 영역은 4, 9 두 곳인 것을 특정하고 실제 테이플에서 데이터를 검색해서 클라이언트한테 전달

![인덱스구조](../mgs/../Imgs/인덱스구조.png)

##### 4. 인덱스를 사용할 때의 장점은?

- 핵심: 인덱스의 데이터는 **정렬**되어있다. 그렇기 때문에 **조건부 데이터 검색을 수행할 경우 검색 성능이 크게 향상된다.**
  - 예시: 도서관 책들의 특정 정보(책 제목, 가격 등)를 기준으로 한 색인을 가지고 있다면, 해당 기준 중 특정 조건을 만족하는 책을 찾을 때 도서관 안의 모든 책을 뒤질 필요가 없다!

- 장점1: 조건 검색(Where절) 및 정렬(Order by절) 프로세스의 성능이 향상됨.
  - 이미 인덱스의 데이터가 정렬되어있기 때문에, 인덱스를 생성한 열에 대한 조건 검색을 하거나 이후 정렬하는 프로세스 성능이 크게 향상된다.
  - 예시: 도서관 안의 책(데이터)을 대상으로 책 이름(열 이름) 기준으로 생성한 색인(인덱스)가 있다고 가정. 그리고 책 제목에 코딩이라는 키워드가 들어있는 책을 모두 검색한다고 가정.
    - 해당 키워드(코딩)가 포함되어 있는 책들을 색인(인덱스)을 통해 찾으면 도서관을 모두 뒤지지 않고 빠른 시간 내 책들을 찾을 수 있으며, 이미 이름 기준으로 정렬되어 있어 찾은 책들을 정렬하는 것도 쉽게 할 수 있다.

- 장점2: 최대값(MAX) 또는 최소값(MIN)과 같은 통계값 계산시 처리 성능이 향상됨.
  - 통계 값을 계산하기 위해서는 구하고자 하는 표본의 범위(시작과 끝)을 정의해야 함. 특정 열 이름 내 그룹을 기준으로 최대값이나 최소값 같은 통계값을 계산할 경우, 해당 기준별 데이터 범위를 인덱스를 통해 빠르게 파악할 수 있어 계산 처리 성능이 향상됨.
  - 예시: 도서관 안의 책(데이터)을 대상으로 장르(열 이름) 기준으로 생성한 색인(인덱스)가 있다고 가정. 그리고 이 중 프로그래밍 장르 책 가격의 최대값(MAX)와 최소값(MIN) 값을 계산하고자 할 경우
    - 이미 각 장르별 책들의 위치를 색인(인덱스)을 통해 미리 파악 가능, 그렇기 때문에 계산 값 또한 빠르게 구할 수 있음. 그렇지 않다면 프로그래밍 장르 책을 모든 책을 검색하면서 우선 찾아야 함.

##### 4. 인덱스를 사용할 때의 단점은?

- 핵심: 인덱스의 데이터는 **현재의 데이터를 기준으로 사전에 정렬**되어있다. 그렇지 때문에 **데이터의 수정이 발생할 경우 성능이 하향된다.**

- 단점1: 각종 데이터 변화(CREATE-생성, UPDATE-수정, DELETE-삭제 )가 빈번할 경우 오히려 성능이 저하됨.
  - 예시: 책 이름(열 이름) 기준으로 만들어진 색인(인덱스)가 있다고 가정. 책이 새로 추가되거나 분실될 경우, 그때마다 색인(인덱스) 새로 다시 만들어야 함. 이 과정에서 업무 처리 부담(서버 부담)이 크게 늘어남.

- 단점2: 인덱스를 너무 많이 설정할 경우 서버 데이터 부담이 늘어남
  - 예시: 책 이름(기존 열) 말고 가격과 작가 성별 등 여러 기준(신규 열)으로 색인을 만들 경우, 색인(인덱스)을 만들기 위해 추가로 페이지(서버 데이터)를 추가해야 한다.

- 단점3: 인덱스를 설정하고자 하는 열의 데이터 수가 적을 경우, 인덱스 사용에 따른 성능 향상이 크게 나타나지 않음.
  - 예시: 색인(인덱스)을 단순히 작가 성별(남자 또는 여자)로 설정할 경우, 색인(인덱스)를 만드나 안만드나 책 검색 속도에 큰 차이가 나지 않음.


##### 5. 결론: 어떠한 경우에 인덱스를 사용하는 것이 좋은가?

- 데이터 수가 많고, 데이터가 중복되지 않고, 데이터의 수정이 자주 발생하지 않는 데이터에 적합.
